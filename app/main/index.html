<!doctype html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>MTG Commander APP</title>
        <link rel="stylesheet" type="text/css" href="../../node_modules/angular-material/angular-material.min.css">
        <link rel="stylesheet" type="text/css" href="main.css">
        <script src="https://use.fontawesome.com/e87c62054b.js"></script>                 
        <script src="../../node_modules/angular/angular.js"></script>
        <script src="../../bower_components/angular-drag-and-drop-lists/angular-drag-and-drop-lists.min.js"></script>
        <script src="../../node_modules/angular-animate/angular-animate.min.js"></script>
        <script src="../../node_modules/angular-aria/angular-aria.min.js"></script>
        <script src="../../node_modules/angular-material/angular-material.min.js"></script>
        <script src="../../node_modules/angular-ui-router/release/angular-ui-router.js"></script>
        <script src="../../node_modules/lodash/lodash.min.js"></script>                                                
        <script src="autocomplete.js"></script>
        <script src="app.js"></script>
        <script src="smallSlider.js"></script>        
    </head>
    <body>
      <div ng-controller="MainCtrl">
        <!--<h1 title name="{{ appname }}" collection="color"></h1>-->
        <h3>MTG_app</h3>
        <div style="width:237px; height:340px; float:left; border: solid 1px black;">
          <div ng-include="'autocompletetemplate.html'"></div>           
          <div ng-if="!cardVersions" style="width: {{ cardWidth }}px; height: {{ cardHeight }}px; background-color: green; margin-left: 33px;"></div>            
          <div ng-if="cardVersions"
                small-slider 
                collection="cardVersions"              
                itemheight="{{ cardHeight }}" 
                itemwidth="{{ cardWidth }}"                          
                clickslideritem="selectCardVersion"
                style="position: relative; margin-left: 33px;"></div>          
        </div>
        <div style="float:left; width:{{ (cardWidth + 10) * 4}}px; height:340px; border: solid 1px green; ">
          <p style="height: 27px;">Geselecteerde kaarten</p>                                         
          <ul class="selectedCardsPile"
              style="width:{{ (cardWidth + 10) * 4}}px; height:260px; margin:0px; border: solid 1px red; "
              dnd-horizontal-list="true">
            <li ng-repeat="card in selectedCards"
                dnd-draggable="card"                                  
                dnd-effect-allowed="move">
                <img ng-src="http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid={{card.multiverseId}}&type=card" alt="" style="width: {{ cardWidth }}px; height: {{ cardHeight }}px">
              <!-- TODO add img  ng-src="http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid={{card.multiverseId}}&type=card" -->
                <!-- {{ card.name }} -->
            </li>            
          </ul>
        </div>                                         
        <div style="clear: left;"></div>

        <div style="border: 1px solid black">
          <form ng-submit="createPile($event)">  
            <input type="text" ng-model="nextPileLabel">
            <input type="submit">
          </form>
        </div>
        <div>
          <div ng-repeat="pile in piles" class="pile" style="float: left;">
            <p>{{pile.name}}</p> 
            <ul dnd-list="pile.cards"
                dnd-horizontal-list="true"
                class="pileOfCards">
              <li ng-repeat="card in pile.cards"
                  dnd-draggable="card"
                  dnd-moved="pile.cards.splice($index,1)"                  
                  dnd-effect-allowed="all"
                  dnd-selected="draggedcard = card"
                  ng-class="{'selected': draggedcard ===  card}">
                  <img ng-src="http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid={{card.multiverseId}}&type=card" alt="" style="width: {{ cardWidth }}px; height: {{ cardHeight }}px">
                  <!-- {{card.name}} -->
              </li>
            </ul>
          </div>                        
        </div>
        </div>              
      </div>         
    </body>

</html>
